<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geoportal Kecamatan Purwokerto Selatan</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ===== VARIABLES & RESET ===== */
        :root {
            --primary: #1A5276;
            --secondary: #3498DB;
            --accent: #2ECC71;
            --light-bg: #F8F9FA;
            --light-card: #FFFFFF;
            --light-gray: #ECF0F1;
            --medium-gray: #BDC3C7;
            --dark-gray: #7F8C8D;
            --text-dark: #2C3E50;
            --text-light: #95A5A6;
            --white: #FFFFFF;
            --star-color: #FFD700;
            --star-empty: #E0E0E0;
            --border-radius: 12px;
            --shadow-subtle: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-medium: 0 6px 20px rgba(0, 0, 0, 0.12);
            --shadow-hover: 0 10px 30px rgba(0, 0, 0, 0.15);
        }
        
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        }
        
        body {
            font-family: 'Nunito', sans-serif;
            color: var(--text-dark);
            background-color: var(--light-bg);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* ===== HEADER YANG SIMPLE ===== */
        .header {
            background-color: var(--light-card);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow-subtle);
            border-bottom: 2px solid var(--light-gray);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        /* LOGO KECAMATAN - SIMPLE HANYA GAMBAR */
        .logo-kecamatan {
            width: 60px;
            height: 60px;
            border-radius: 10px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border: 3px solid var(--white);
            background-color: var(--white);
        }
        
        .logo-kecamatan img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            padding: 5px;
        }
        
        /* LOGO GEOPORTAL - SIMPLE HANYA ICON */
        .logo-geoportal {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo-geoportal-icon {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--secondary), var(--accent));
            border-radius: 10px;
            color: var(--white);
            font-size: 1.8rem;
            box-shadow: 0 4px 8px rgba(52, 152, 219, 0.25);
        }
        
        .logo-geoportal-text {
            display: flex;
            flex-direction: column;
        }
        
        .logo-geoportal-main {
            font-family: 'Poppins', sans-serif;
            font-weight: 700;
            font-size: 1.8rem;
            color: var(--primary);
            line-height: 1;
        }
        
        .logo-geoportal-tagline {
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            font-size: 0.85rem;
            color: var(--dark-gray);
            margin-top: 2px;
        }
        
        /* NAVIGASI */
        .nav {
            display: flex;
            gap: 10px;
        }
        
        .nav a {
            padding: 0.8rem 1.5rem;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-dark);
            background-color: transparent;
            border: 2px solid var(--medium-gray);
            font-family: 'Poppins', sans-serif;
        }
        
        .nav a:hover {
            background-color: var(--secondary);
            color: var(--white);
            border-color: var(--secondary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-subtle);
        }
        
        .nav a.active {
            background-color: var(--secondary);
            color: var(--white);
            border-color: var(--secondary);
        }
        
        /* ===== HERO SECTION DENGAN BACKGROUND ===== */
        .hero {
            padding: 5rem 2rem;
            text-align: center;
            max-width: 100%;
            margin: 2rem 0;
            background: linear-gradient(rgba(26, 82, 118, 0.85), rgba(52, 152, 219, 0.9)),
                        url('https://images.unsplash.com/photo-1519681393784-d120267933ba?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80') center/cover no-repeat;
            border-radius: 0;
            color: var(--white);
            position: relative;
            overflow: hidden;
        }
        
        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 20% 50%, rgba(46, 204, 113, 0.2), transparent 50%),
                        radial-gradient(circle at 80% 20%, rgba(52, 152, 219, 0.2), transparent 50%);
            z-index: 1;
        }
        
        .hero-content {
            position: relative;
            z-index: 2;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .hero h2 {
            font-family: 'Poppins', sans-serif;
            font-weight: 700;
            font-size: 3rem;
            margin-bottom: 1.5rem;
            color: var(--white);
            line-height: 1.2;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .hero h2 span {
            color: var(--accent);
            background: linear-gradient(45deg, var(--accent), #16A085);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .hero p {
            font-size: 1.2rem;
            margin-bottom: 2.5rem;
            color: rgba(255, 255, 255, 0.9);
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            font-weight: 400;
        }
        
        .cta-button {
            display: inline-block;
            background-color: var(--accent);
            color: var(--white);
            padding: 1.2rem 3rem;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.2rem;
            box-shadow: 0 8px 20px rgba(46, 204, 113, 0.3);
            transition: all 0.3s ease;
            border: none;
            font-family: 'Poppins', sans-serif;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        
        .cta-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 0%;
            height: 100%;
            background-color: #16A085;
            transition: all 0.4s ease;
            z-index: -1;
        }
        
        .cta-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(46, 204, 113, 0.4);
        }
        
        .cta-button:hover::before {
            width: 100%;
        }
        
        .cta-button i {
            margin-right: 10px;
            font-size: 1.4rem;
        }

        /* ===== TEMPAT BERSEJARAH ===== */
        .features {
            padding: 4rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
            background-color: var(--light-card);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-subtle);
            margin-bottom: 4rem;
        }
        
        .features h3 {
            text-align: center;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 2.2rem;
            margin-bottom: 3rem;
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .features h3 i {
            color: var(--accent);
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2.5rem;
        }
        
        .feature-card {
            background: var(--white);
            padding: 2rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-subtle);
            transition: all 0.3s ease;
            text-align: left;
            border: 1px solid var(--light-gray);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
        }
        
        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(to bottom, var(--secondary), var(--accent));
            transition: width 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-hover);
            border-color: var(--secondary);
        }
        
        .feature-card:hover::before {
            width: 10px;
        }
        
        .place-image {
            width: 100%;
            height: 200px;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 1.2rem;
        }
        
        .place-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .feature-card:hover .place-image img {
            transform: scale(1.05);
        }
        
        .place-rating {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }
        
        .stars {
            display: flex;
            gap: 2px;
        }
        
        .star {
            color: var(--star-empty);
            font-size: 1rem;
        }
        
        .star.filled {
            color: var(--star-color);
        }
        
        .rating-value {
            font-weight: 600;
            color: var(--text-dark);
            margin-left: 5px;
        }
        
        .review-count {
            color: var(--text-light);
            font-size: 0.85rem;
        }
        
        .feature-card h4 {
            font-size: 1.4rem;
            margin-bottom: 0.8rem;
            color: var(--primary);
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
        }
        
        .feature-card p {
            color: var(--text-light);
            font-size: 0.95rem;
            line-height: 1.6;
            margin-bottom: 1.2rem;
            flex-grow: 1;
        }
        
        .place-address {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin-top: 0.5rem;
            font-size: 0.9rem;
            color: var(--dark-gray);
        }
        
        .place-address i {
            color: var(--secondary);
            margin-top: 3px;
        }
        
        .address-link {
            color: var(--secondary);
            text-decoration: none;
            transition: color 0.3s ease;
            word-break: break-word;
        }
        
        .address-link:hover {
            color: var(--accent);
            text-decoration: underline;
        }

        /* ===== MAP PREVIEW ===== */
        .map-preview {
            padding: 3rem 2rem;
            max-width: 1200px;
            margin: 0 auto 5rem;
            text-align: center;
        }
        
        .map-preview h3 {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 2.2rem;
            margin-bottom: 2.5rem;
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .map-preview h3 i {
            color: var(--accent);
        }
        
        .map-container {
            background: var(--white);
            border-radius: var(--border-radius);
            padding: 2.5rem;
            box-shadow: var(--shadow-subtle);
            border: 1px solid var(--light-gray);
            transition: all 0.3s ease;
        }
        
        .map-container:hover {
            box-shadow: var(--shadow-hover);
            border-color: var(--medium-gray);
        }
        
        .map-options {
            display: flex;
            justify-content: center;
            gap: 2.5rem;
            margin: 2rem 0 3rem;
            flex-wrap: wrap;
        }
        
        .map-option {
            background-color: var(--white);
            padding: 2rem;
            border-radius: var(--border-radius);
            text-decoration: none;
            color: var(--text-dark);
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 20px;
            box-shadow: var(--shadow-subtle);
            border: 1px solid var(--light-gray);
            width: 320px;
            text-align: left;
            position: relative;
            overflow: hidden;
        }
        
        .map-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(to right, var(--secondary), var(--accent));
            transition: height 0.3s ease;
        }
        
        .map-option:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-hover);
            border-color: var(--secondary);
        }
        
        .map-option:hover::before {
            height: 8px;
        }
        
        .map-option i {
            font-size: 2.5rem;
            color: var(--secondary);
            transition: all 0.3s ease;
        }
        
        .map-option:hover i {
            transform: scale(1.2);
            color: var(--accent);
        }
        
        .map-option div {
            text-align: left;
            flex: 1;
        }
        
        .map-option strong {
            display: block;
            font-size: 1.3rem;
            margin-bottom: 8px;
            color: var(--primary);
        }
        
        .map-option .description {
            display: block;
            font-size: 0.95rem;
            color: var(--text-light);
            font-weight: 400;
            line-height: 1.5;
        }
        
        .map-thumbnail {
            width: 100%;
            height: 350px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 2.5rem auto;
            position: relative;
            overflow: hidden;
            border: 1px solid var(--light-gray);
        }
        
        .leaflet-card {
            position: absolute;
            width: 80%;
            height: 80%;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .leaflet-header {
            background: var(--primary);
            color: white;
            padding: 10px 15px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .leaflet-body {
            flex: 1;
            background: linear-gradient(135deg, #e0f7fa 0%, #80deea 100%);
            position: relative;
        }
        
        .leaflet-controls {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 8px;
        }
        
        .leaflet-control {
            width: 30px;
            height: 30px;
            background: white;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            color: var(--primary);
        }
        
        .leaflet-marker {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--accent);
            font-size: 2.5rem;
            filter: drop-shadow(0 2px 5px rgba(0,0,0,0.2));
        }
        
        .map-thumbnail::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(52, 152, 219, 0.05) 50%, 
                transparent 100%);
            animation: shimmer 2.5s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .map-thumbnail-text {
            font-family: 'Poppins', sans-serif;
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--primary);
            z-index: 2;
            background: rgba(255, 255, 255, 0.95);
            padding: 1rem 2rem;
            border-radius: var(--border-radius);
            border: 1px solid var(--light-gray);
            box-shadow: var(--shadow-subtle);
        }
        
        .map-container > p {
            color: var(--text-light);
            font-size: 1rem;
            margin-top: 1.5rem;
        }

        /* ===== FOOTER ===== */
        .footer {
            background-color: var(--primary);
            color: var(--white);
            text-align: center;
            padding: 2.5rem;
            margin-top: auto;
            border-top: 1px solid var(--light-gray);
        }
        
        .footer p {
            margin-bottom: 0.8rem;
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }
        
        .footer-links a {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .footer-links a:hover {
            color: var(--white);
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        
        .footer-links a i {
            font-size: 1.1rem;
        }

        /* ===== MODAL UNTUK DETAIL TEMPAT ===== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 1rem;
        }
        
        .modal-content {
            background-color: var(--white);
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        
        .modal-header {
            padding: 1.5rem 2rem;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            border-radius: var(--border-radius) var(--border-radius) 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h3 {
            font-size: 1.5rem;
            margin: 0;
            font-family: 'Poppins', sans-serif;
        }
        
        .close-modal {
            background: none;
            border: none;
            color: white;
            font-size: 1.8rem;
            cursor: pointer;
            padding: 0;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background-color 0.3s ease;
        }
        
        .close-modal:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .modal-body {
            padding: 2rem;
        }
        
        .modal-image {
            width: 100%;
            height: 300px;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 1.5rem;
        }
        
        .modal-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .modal-rating-summary {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .average-rating {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: var(--light-gray);
            padding: 1rem;
            border-radius: var(--border-radius);
            min-width: 120px;
        }
        
        .average-rating-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
            line-height: 1;
        }
        
        .average-rating-stars {
            display: flex;
            gap: 2px;
            margin: 5px 0;
        }
        
        .average-rating-stars .star {
            font-size: 1.2rem;
        }
        
        .total-reviews {
            color: var(--text-light);
            font-size: 0.9rem;
        }
        
        .rating-distribution {
            flex: 1;
        }
        
        .rating-bar {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
        }
        
        .rating-label {
            width: 70px;
            font-size: 0.9rem;
            color: var(--text-dark);
        }
        
        .rating-progress {
            flex: 1;
            height: 8px;
            background-color: var(--light-gray);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .rating-progress-fill {
            height: 100%;
            background: linear-gradient(to right, #FFD700, #FFA500);
        }
        
        .modal-description {
            color: var(--text-dark);
            line-height: 1.7;
            margin-bottom: 1.5rem;
        }
        
        .modal-address {
            background-color: var(--light-gray);
            padding: 1.2rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }
        
        .modal-address i {
            color: var(--secondary);
            margin-top: 3px;
        }
        
        /* ===== BAGIAN ULASAN ===== */
        .reviews-section {
            margin-top: 2rem;
            border-top: 1px solid var(--light-gray);
            padding-top: 2rem;
        }
        
        .reviews-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .reviews-header h4 {
            font-size: 1.3rem;
            color: var(--primary);
            font-family: 'Poppins', sans-serif;
        }
        
        .add-review-btn {
            background-color: var(--secondary);
            color: white;
            border: none;
            padding: 0.6rem 1.2rem;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        
        .add-review-btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }
        
        .reviews-list {
            margin-bottom: 2rem;
        }
        
        .review-item {
            background-color: var(--light-gray);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            margin-bottom: 1rem;
        }
        
        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.8rem;
        }
        
        .reviewer-info {
            display: flex;
            flex-direction: column;
        }
        
        .reviewer-name {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        .review-date {
            color: var(--text-light);
            font-size: 0.85rem;
        }
        
        .review-rating {
            display: flex;
            gap: 2px;
        }
        
        .review-rating .star {
            font-size: 0.9rem;
        }
        
        .review-comment {
            color: var(--text-dark);
            line-height: 1.6;
            margin-bottom: 0.5rem;
        }
        
        /* ===== FORM TAMBAH ULASAN ===== */
        .review-form {
            background-color: var(--light-gray);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            margin-bottom: 2rem;
        }
        
        .review-form h4 {
            margin-bottom: 1rem;
            color: var(--primary);
            font-family: 'Poppins', sans-serif;
        }
        
        .form-group {
            margin-bottom: 1.2rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-dark);
        }
        
        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid var(--medium-gray);
            border-radius: 8px;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--secondary);
        }
        
        .rating-input {
            display: flex;
            flex-direction: column;
        }
        
        .rating-stars-input {
            display: flex;
            gap: 5px;
            margin-bottom: 0.5rem;
        }
        
        .star-input {
            font-size: 1.8rem;
            color: var(--star-empty);
            cursor: pointer;
            transition: color 0.2s ease;
        }
        
        .star-input:hover,
        .star-input.active {
            color: var(--star-color);
        }
        
        .rating-text {
            color: var(--text-light);
            font-size: 0.9rem;
        }
        
        .form-buttons {
            display: flex;
            gap: 1rem;
        }
        
        .btn-submit {
            background-color: var(--accent);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        
        .btn-submit:hover {
            background-color: #27ae60;
            transform: translateY(-2px);
        }
        
        .btn-cancel {
            background-color: var(--medium-gray);
            color: var(--text-dark);
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-cancel:hover {
            background-color: var(--dark-gray);
            color: white;
        }
        
        .modal-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }
        
        .modal-btn {
            flex: 1;
            padding: 1rem;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
        }
        
        .btn-view-map {
            background-color: var(--secondary);
            color: white;
        }
        
        .btn-close {
            background-color: var(--light-gray);
            color: var(--text-dark);
        }
        
        .modal-btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-subtle);
        }
        
        .btn-view-map:hover {
            background-color: #2980b9;
        }
        
        .btn-close:hover {
            background-color: var(--medium-gray);
        }

        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 992px) {
            .header { 
                flex-direction: column; 
                gap: 1.5rem; 
                padding: 1.5rem; 
            }
            
            .logo-container {
                flex-direction: column;
                gap: 15px;
                width: 100%;
            }
            
            .logo-kecamatan,
            .logo-geoportal {
                width: 100%;
                justify-content: center;
            }
            
            .nav { 
                flex-wrap: wrap; 
                justify-content: center; 
                width: 100%;
            }
            
            .hero h2 { 
                font-size: 2.5rem; 
            }
            
            .features-grid { 
                grid-template-columns: repeat(2, 1fr); 
            }
            
            .map-options { 
                flex-direction: column; 
                align-items: center; 
            }
            
            .map-option { 
                width: 100%; 
                max-width: 400px; 
            }
            
            .modal-content {
                width: 95%;
            }
            
            .modal-rating-summary {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .rating-distribution {
                width: 100%;
            }
        }
        
        @media (max-width: 768px) {
            .hero h2 { 
                font-size: 2rem; 
            }
            
            .hero p {
                font-size: 1.1rem;
            }
            
            .features-grid { 
                grid-template-columns: 1fr; 
            }
            
            .nav a { 
                padding: 0.7rem 1.2rem; 
                font-size: 0.95rem; 
            }
            
            .logo-kecamatan {
                width: 50px;
                height: 50px;
            }
            
            .logo-geoportal-icon {
                width: 45px;
                height: 45px;
                font-size: 1.6rem;
            }
            
            .logo-geoportal-main {
                font-size: 1.6rem;
            }
            
            .map-thumbnail { 
                height: 250px; 
            }
            
            .map-thumbnail-text { 
                font-size: 1.4rem; 
                padding: 0.8rem 1.5rem; 
            }
            
            .modal-image {
                height: 200px;
            }
            
            .modal-buttons,
            .form-buttons {
                flex-direction: column;
            }
        }
        
        @media (max-width: 480px) {
            .header {
                padding: 1rem;
            }
            
            .hero {
                padding: 3rem 1rem;
            }
            
            .cta-button {
                padding: 1rem 2rem;
                font-size: 1.1rem;
            }
            
            .logo-kecamatan {
                width: 45px;
                height: 45px;
            }
            
            .logo-geoportal-icon {
                width: 40px;
                height: 40px;
                font-size: 1.4rem;
            }
            
            .features {
                padding: 2rem 1rem;
            }
            
            .map-preview {
                padding: 2rem 1rem;
            }
            
            .modal-header {
                padding: 1rem;
            }
            
            .modal-body {
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- HEADER DENGAN LOGO GAMBAR ASLI -->
    <header class="header">
        <div class="logo-container">
            <!-- LOGO KECAMATAN - HANYA GAMBAR SAJA -->
            <div class="logo-kecamatan">
                <img src="../img/logo_pwtsel.png" alt="Logo Kecamatan Purwokerto Selatan">
            </div>
            <!-- LOGO GEOPORTAL -->
            <div class="logo-geoportal">
                <div class="logo-geoportal-icon">
                    <i class="fas fa-map-marked-alt"></i>
                </div>
                <div class="logo-geoportal-text">
                    <div class="logo-geoportal-main">Geoportal</div>
                    <div class="logo-geoportal-tagline">Data Spasial Digital</div>
                </div>
            </div>
        </div>
        
        <!-- NAVIGASI -->
        <nav class="nav">
            <a href="./" class="active"><i class="fas fa-home"></i> Beranda</a>
            <a href="../Kecamatan/"><i class="fas fa-map-marked-alt"></i> Peta Kecamatan</a>
            <a href="../teluk/"><i class="fas fa-water"></i> Peta Desa Teluk</a>
            <a href="../tentang/"><i class="fas fa-user-circle"></i> Tentang Kami</a>
        </nav>
    </header>

    <!-- HERO SECTION DENGAN BACKGROUND -->
    <section class="hero">
        <div class="hero-content">
            <h2>Portal <span>Data Spasial</span> Terpadu</h2>
            <p>Portal ini menyajikan peta interaktif dan data geospasial wilayah Kecamatan Purwokerto Selatan untuk perencanaan dan pengembangan wilayah. Jelajahi, analisis, dan akses data dengan mudah!</p>
            <a href="#tempat-bersejarah" class="cta-button"><i class="fas fa-landmark"></i> Jelajahi Tempat Bersejarah</a>
        </div>
    </section>

    <!-- TEMPAT BERSEJARAH -->
    <section class="features" id="tempat-bersejarah">
        <h3><i class="fas fa-landmark"></i> Tempat Bersejarah</h3>
        <div class="features-grid">
            <!-- Tempat 1 -->
            <div class="feature-card" data-place="1">
                <div class="place-image">
                    <img src="../img/taman-andhang-pangeran-purwokerto.jpg" alt="Taman Andhang Pangrenan">
                </div>
                <div class="place-rating">
                    <div class="stars">
                        <span class="star filled">★</span>
                        <span class="star filled">★</span>
                        <span class="star filled">★</span>
                        <span class="star filled">★</span>
                        <span class="star">★</span>
                    </div>
                    <span class="rating-value">4.2</span>
                    <span class="review-count">(42 ulasan)</span>
                </div>
                <h4>Taman Andhang Pangrenan Purwokerto</h4>
                <p>Taman rekreasi ini dibangun pada tahun 2017 dengan konsep taman edukasi yang menggabungkan unsur budaya, sejarah, dan lingkungan...</p>
                <div class="place-address">
                    <i class="fas fa-map-marker-alt"></i>
                    <a href="teluk/?lat=-7.4417&lng=109.2385&zoom=16&place=Masjid Jami' Purwokerto" class="address-link">Jalan Gerilya Purwokerto Selatan, Jl. Prof. M Yamin I, Windusara...</a>
                </div>
            </div>
            
            <!-- Tempat 2 -->
            <div class="feature-card" data-place="2">
                <div class="place-image">
                    <img src="../img/Taman-Satria-Purwokerto.png" alt="Taman Satria Purwokerto">
                </div>
                <div class="place-rating">
                    <div class="stars">
                        <span class="star filled">★</span>
                        <span class="star filled">★</span>
                        <span class="star filled">★</span>
                        <span class="star filled">★</span>
                        <span class="star filled">★</span>
                    </div>
                    <span class="rating-value">4.8</span>
                    <span class="review-count">(67 ulasan)</span>
                </div>
                <h4>Taman Satria Purwokerto</h4>
                <p>Taman Satria Berkoh Purwokerto merupakan salah satu RTH atau Taman Kota yang sudah 33 tahun menjadi paru-paru kota Purwokerto...</p>
                <div class="place-address">
                    <i class="fas fa-map-marker-alt"></i>
                    <a href="teluk/?lat=-7.4432&lng=109.2401&zoom=16&place=Museum BRI" class="address-link">Kebontebu, Berkoh, Kec. Purwokerto Sel., Kabupaten Banyumas...</a>
                </div>
            </div>
            
            <!-- Tempat 3 -->
            <div class="feature-card" data-place="3">
                <div class="place-image">
                    <img src="../img/Bukit cinta.png" alt="Bukit Cinta">
                </div>
                <div class="place-rating">
                    <div class="stars">
                        <span class="star filled">★</span>
                        <span class="star filled">★</span>
                        <span class="star filled">★</span>
                        <span class="star">★</span>
                        <span class="star">★</span>
                    </div>
                    <span class="rating-value">3.5</span>
                    <span class="review-count">(28 ulasan)</span>
                </div>
                <h4>Bukit Cinta</h4>
                <p>Bukit Cinta merupakan area perbukitan yang sejak lama dikenal oleh warga setempat sebagai tempat berkumpul dan berkegiatan sosial...</p>
                <div class="place-address">
                    <i class="fas fa-map-marker-alt"></i>
                    <a href="teluk/?lat=-7.4398&lng=109.2352&zoom=16&place=Taman Andhang Pangrenan" class="address-link">G7F4+5RJ, Dusun II Wiradadi, Wiradadi, Kec. Sokaraja...</a>
                </div>
            </div>
            
            <!-- Tempat 4 -->
            <div class="feature-card" data-place="4">
                <div class="place-image">
                    <img src="../img/terminal-pwt.jpeg" alt="Terminal Bulupitu">
                </div>
                <div class="place-rating">
                    <div class="stars">
                        <span class="star filled">★</span>
                        <span class="star filled">★</span>
                        <span class="star">★</span>
                        <span class="star">★</span>
                        <span class="star">★</span>
                    </div>
                    <span class="rating-value">2.8</span>
                    <span class="review-count">(51 ulasan)</span>
                </div>
                <h4>Terminal Bulupitu</h4>
                <p>Terminal Bulupitu di Purwokerto secara resmi berdiri pada 6 April 2006, ketika terminal bus dipindahkan dari lokasi lama ke Bulupitu...</p>
                <div class="place-address">
                    <i class="fas fa-map-marker-alt"></i>
                    <a href="teluk/?lat=-7.4465&lng=109.2428&zoom=16&place=Stasiun Purwokerto" class="address-link">H744+HHM, Karanggayam, Teluk, Kec. Purwokerto Sel....</a>
                </div>
            </div>
        </div>
    </section>

    <!-- MAP PREVIEW SECTION -->
    <section class="map-preview" id="peta">
        <h3><i class="fas fa-map-signs"></i> Peta Interaktif</h3>
        <div class="map-container">
            <div class="map-options">
                <a href="../Kecamatan/" class="map-option">
                    <i class="fas fa-mountain"></i>
                    <div>
                        <strong>Kecamatan Purwokerto Selatan</strong>
                        <span class="description">Peta lengkap seluruh wilayah kecamatan dengan 7 desa</span>
                    </div>
                </a>
                <a href="../teluk/" class="map-option">
                    <i class="fas fa-water"></i>
                    <div>
                        <strong>Desa Teluk</strong>
                        <span class="description">Peta detail wilayah Desa Teluk dengan data spasial lengkap</span>
                    </div>
                </a>
            </div>
            
            <div class="map-thumbnail">
                <!-- Card Leaflet untuk Peta Desa Teluk -->
                <div class="leaflet-card">
                    <div class="leaflet-header">
                        <i class="fas fa-map"></i> Desa Teluk - Peta Interaktif
                    </div>
                    <div class="leaflet-body">
                        <div class="leaflet-controls">
                            <div class="leaflet-control"><i class="fas fa-plus"></i></div>
                            <div class="leaflet-control"><i class="fas fa-minus"></i></div>
                            <div class="leaflet-control"><i class="fas fa-locate"></i></div>
                        </div>
                        <div class="leaflet-marker">
                            <i class="fas fa-map-pin"></i>
                        </div>
                    </div>
                </div>
                
                <div class="map-thumbnail-text">
                    Pilih Peta di Atas untuk Memulai!
                </div>
            </div>
            
            <p>Klik pada pilihan peta di atas untuk membuka peta interaktif dengan semua fitur lengkap LeafletJS.</p>
        </div>
    </section>

    <!-- MODAL UNTUK DETAIL TEMPAT BERSEJARAH -->
    <div class="modal" id="placeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalPlaceName">Tempat Bersejarah</h3>
                <button class="close-modal" id="closeModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-image">
                    <img id="modalPlaceImage" src="" alt="Gambar Tempat">
                </div>
                
                <!-- Rating Summary -->
                <div class="modal-rating-summary">
                    <div class="average-rating">
                        <div class="average-rating-value" id="averageRating">4.5</div>
                        <div class="average-rating-stars" id="averageStars">
                            <span class="star filled">★</span>
                            <span class="star filled">★</span>
                            <span class="star filled">★</span>
                            <span class="star filled">★</span>
                            <span class="star">★</span>
                        </div>
                        <div class="total-reviews" id="totalReviews">42 ulasan</div>
                    </div>
                    <div class="rating-distribution" id="ratingDistribution">
                        <!-- Rating distribution will be generated by JavaScript -->
                    </div>
                </div>
                
                <p class="modal-description" id="modalPlaceDescription"></p>
                <div class="modal-address">
                    <i class="fas fa-map-marker-alt"></i>
                    <span id="modalPlaceAddress"></span>
                </div>
                
                <!-- Reviews Section -->
                <div class="reviews-section">
                    <div class="reviews-header">
                        <h4>Ulasan Pengunjung</h4>
                        <button class="add-review-btn" id="openReviewForm">
                            <i class="fas fa-edit"></i> Tambah Ulasan
                        </button>
                    </div>
                    
                    <!-- Review Form (Initially Hidden) -->
                    <div class="review-form" id="reviewForm" style="display: none;">
                        <h4>Tulis Ulasan Anda</h4>
                        <form id="newReviewForm">
                            <div class="form-group">
                                <label for="reviewerName">Nama</label>
                                <input type="text" id="reviewerName" placeholder="Nama Anda" required>
                            </div>
                            <div class="form-group rating-input">
                                <label>Rating</label>
                                <div class="rating-stars-input" id="ratingStarsInput">
                                    <span class="star-input" data-rating="1">★</span>
                                    <span class="star-input" data-rating="2">★</span>
                                    <span class="star-input" data-rating="3">★</span>
                                    <span class="star-input" data-rating="4">★</span>
                                    <span class="star-input" data-rating="5">★</span>
                                </div>
                                <div class="rating-text" id="ratingText">Pilih rating dengan mengklik bintang</div>
                                <input type="hidden" id="selectedRating" value="0">
                            </div>
                            <div class="form-group">
                                <label for="reviewComment">Ulasan</label>
                                <textarea id="reviewComment" rows="4" placeholder="Bagikan pengalaman Anda mengunjungi tempat ini..." required></textarea>
                            </div>
                            <div class="form-buttons">
                                <button type="submit" class="btn-submit">
                                    <i class="fas fa-paper-plane"></i> Kirim Ulasan
                                </button>
                                <button type="button" class="btn-cancel" id="cancelReviewForm">
                                    Batal
                                </button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Reviews List -->
                    <div class="reviews-list" id="reviewsList">
                        <!-- Reviews will be loaded here -->
                    </div>
                </div>
                
                <!-- Modal Action Buttons -->
                <div class="modal-buttons">
                    <button class="modal-btn btn-view-map" id="viewOnMap">
                        <i class="fas fa-map-marked-alt"></i> Lihat di Peta
                    </button>
                    <button class="modal-btn btn-close" id="closeModalBtn">
                        <i class="fas fa-times"></i> Tutup
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <footer class="footer">
        <p>Dibuat menggunakan QGIS & Leaflet</p>
        <p>© <span id="current-year">2025</span> Geoportal Kecamatan Purwokerto Selatan</p>
        <div class="footer-links">
            <a href="https://github.com/tiapmo" target="_blank"><i class="fab fa-github"></i> GitHub</a>
            <a href="mailto:contoh@email.com"><i class="fas fa-envelope"></i> Kontak</a>
            <a href="../tentang/"><i class="fas fa-user-circle"></i> Tentang Kami</a>
        </div>
    </footer>

    <script>
        // Data tempat bersejarah
        const placesData = {
            1: {
                name: "Taman Andhang Pangrenan Purwokerto",
                image: "../img/taman-andhang-pangeran-purwokerto.jpg",
                description: "Taman rekreasi ini dibangun pada tahun 2017 dengan konsep taman edukasi yang menggabungkan unsur budaya, sejarah, dan lingkungan. Nama taman ini berasal dari bahasa Jawa yang berarti 'taman yang mengajarkan' atau 'taman yang memberi petunjuk'. Taman ini menjadi salah satu ruang publik favorit warga Purwokerto untuk bersantai dan beraktivitas. Fasilitas yang tersedia meliputi area bermain anak, jogging track, taman bunga, dan ruang terbuka untuk berbagai kegiatan masyarakat.",
                address: "Jalan Gerilya Purwokerto Selatan, Jl. Prof. M Yamin I, Windusara, Karangklesem, Kec. Banyumas, Kabupaten Banyumas, Jawa Tengah 53144",
                mapLink: "teluk/?lat=-7.4417&lng=109.2385&zoom=16&place=Taman Andhang Pangrenan",
                initialRating: 4.2,
                initialReviews: 42
            },
            2: {
                name: "Taman Satria Purwokerto",
                image: "../img/Taman-Satria-Purwokerto.png",
                description: "Taman Satria Berkoh Purwokerto merupakan salah satu RTH atau Taman Kota yang sudah 33 tahun menjadi paru-paru kota Purwokerto. Taman Satria Berkoh Purwokerto diresmikan pada Rabu, 15 Januari 1992 oleh Bupati KDH TK.II Banyumas Djoko Sudantoko. Taman ini memiliki fasilitas lengkap termasuk area bermain anak, jogging track, dan area pertemuan masyarakat. Taman ini sering menjadi lokasi kegiatan sosial, olahraga, dan rekreasi keluarga di akhir pekan.",
                address: "Kebontebu, Berkoh, Kec. Purwokerto Sel., Kabupaten Banyumas, Jawa Tengah 53146",
                mapLink: "teluk/?lat=-7.4432&lng=109.2401&zoom=16&place=Taman Satria",
                initialRating: 4.8,
                initialReviews: 67
            },
            3: {
                name: "Bukit Cinta",
                image: "../img/Bukit cinta.png",
                description: "Bukit Cinta merupakan area perbukitan yang sejak lama dikenal oleh warga setempat sebagai tempat berkumpul dan berkegiatan sosial, terutama bagi generasi muda. Dari kebiasaan inilah tempat ini mendapat nama 'Bukit Cinta'. Tempat ini menawarkan pemandangan kota Purwokerto yang indah, terutama saat sore dan malam hari. Meskipun tidak memiliki fasilitas yang lengkap, keindahan alam dan udara segar membuat tempat ini tetap populer dikunjungi.",
                address: "G7F4+5RJ, Dusun II Wiradadi, Wiradadi, Kec. Sokaraja, Kabupaten Banyumas, Jawa Tengah 53181",
                mapLink: "teluk/?lat=-7.4398&lng=109.2352&zoom=16&place=Bukit Cinta",
                initialRating: 3.5,
                initialReviews: 28
            },
            4: {
                name: "Terminal Bulupitu",
                image: "../img/terminal-pwt.jpeg",
                description: "Terminal Bulupitu di Purwokerto secara resmi berdiri pada 6 April 2006, ketika terminal bus dipindahkan dari lokasi lama ke Bulupitu sebagai terminal tipe A yang melayani angkutan kota, pedesaan, serta angkutan antarkota dalam dan antar provinsi. Terminal ini menjadi pusat transportasi utama di wilayah Banyumas dan sekitarnya. Meskipun lebih berfungsi sebagai terminal transportasi, bangunannya memiliki nilai sejarah sebagai titik penting perkembangan transportasi di Purwokerto.",
                address: "H744+HHM, Karanggayam, Teluk, Kec. Purwokerto Sel., Kabupaten Banyumas, Jawa Tengah 53145",
                mapLink: "teluk/?lat=-7.4465&lng=109.2428&zoom=16&place=Terminal Bulupitu",
                initialRating: 2.8,
                initialReviews: 51
            }
        };

        // Reviews data (simulated - in real app this would come from a database)
        let reviewsData = {
            1: [
                { id: 1, name: "Budi Santoso", rating: 5, comment: "Taman yang sangat nyaman dan bersih. Cocok untuk keluarga!", date: "2024-03-15" },
                { id: 2, name: "Sari Indah", rating: 4, comment: "Fasilitas lengkap, tapi area bermain anak perlu perawatan lebih.", date: "2024-03-10" },
                { id: 3, name: "Agus Prasetyo", rating: 4, comment: "Tempat favorit untuk jogging di pagi hari. Udara segar!", date: "2024-03-05" }
            ],
            2: [
                { id: 1, name: "Dewi Lestari", rating: 5, comment: "Taman terbaik di Purwokerto! Sangat terawat dan asri.", date: "2024-03-18" },
                { id: 2, name: "Rudi Hartono", rating: 5, comment: "Anak-anak sangat senang bermain di sini. Keamanan terjaga.", date: "2024-03-12" }
            ],
            3: [
                { id: 1, name: "Fajar Nugroho", rating: 4, comment: "Pemandangan indah, tapi akses jalan agak sulit.", date: "2024-03-14" },
                { id: 2, name: "Maya Sari", rating: 3, comment: "Tempat romantis untuk pasangan, tapi kurang fasilitas.", date: "2024-03-08" }
            ],
            4: [
                { id: 1, name: "Joko Widodo", rating: 3, comment: "Terminal cukup luas tapi kadang ramai dan berisik.", date: "2024-03-16" },
                { id: 2, name: "Linda Susanti", rating: 2, comment: "Parkir agak sempit, perlu penataan ulang.", date: "2024-03-09" }
            ]
        };

        // Initialize localStorage if not exists
        function initializeReviewsStorage() {
            if (!localStorage.getItem('geoportalReviews')) {
                localStorage.setItem('geoportalReviews', JSON.stringify(reviewsData));
            } else {
                reviewsData = JSON.parse(localStorage.getItem('geoportalReviews'));
            }
        }

        // Save reviews to localStorage
        function saveReviewsToStorage() {
            localStorage.setItem('geoportalReviews', JSON.stringify(reviewsData));
        }

        // Calculate average rating
        function calculateAverageRating(placeId) {
            const reviews = reviewsData[placeId] || [];
            if (reviews.length === 0) return placesData[placeId]?.initialRating || 0;
            
            const total = reviews.reduce((sum, review) => sum + review.rating, 0);
            return (total / reviews.length).toFixed(1);
        }

        // Get total reviews
        function getTotalReviews(placeId) {
            const reviews = reviewsData[placeId] || [];
            return reviews.length;
        }

        // Get rating distribution
        function getRatingDistribution(placeId) {
            const reviews = reviewsData[placeId] || [];
            const distribution = { 5: 0, 4: 0, 3: 0, 2: 0, 1: 0 };
            
            reviews.forEach(review => {
                if (review.rating >= 1 && review.rating <= 5) {
                    distribution[review.rating]++;
                }
            });
            
            return distribution;
        }

        // Render stars based on rating
        function renderStars(rating, containerId, isEditable = false) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            container.innerHTML = '';
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 >= 0.5;
            
            for (let i = 1; i <= 5; i++) {
                const star = document.createElement('span');
                star.className = 'star';
                
                if (i <= fullStars) {
                    star.classList.add('filled');
                    star.textContent = '★';
                } else if (i === fullStars + 1 && hasHalfStar) {
                    // Half star (not implemented in this simple version)
                    star.textContent = '★';
                } else {
                    star.textContent = '★';
                }
                
                if (isEditable) {
                    star.dataset.rating = i;
                    star.classList.add('star-input');
                    star.addEventListener('mouseover', handleStarHover);
                    star.addEventListener('click', handleStarClick);
                }
                
                container.appendChild(star);
            }
        }

        // Render rating distribution
        function renderRatingDistribution(placeId) {
            const container = document.getElementById('ratingDistribution');
            if (!container) return;
            
            const distribution = getRatingDistribution(placeId);
            const totalReviews = getTotalReviews(placeId);
            
            container.innerHTML = '';
            
            for (let i = 5; i >= 1; i--) {
                const percentage = totalReviews > 0 ? (distribution[i] / totalReviews * 100) : 0;
                
                const bar = document.createElement('div');
                bar.className = 'rating-bar';
                
                bar.innerHTML = `
                    <div class="rating-label">${i} ★</div>
                    <div class="rating-progress">
                        <div class="rating-progress-fill" style="width: ${percentage}%"></div>
                    </div>
                    <div class="rating-count">${distribution[i]}</div>
                `;
                
                container.appendChild(bar);
            }
        }

        // Render reviews list
        function renderReviewsList(placeId) {
            const container = document.getElementById('reviewsList');
            if (!container) return;
            
            const reviews = reviewsData[placeId] || [];
            
            if (reviews.length === 0) {
                container.innerHTML = '<p>Belum ada ulasan. Jadilah yang pertama memberikan ulasan!</p>';
                return;
            }
            
            container.innerHTML = '';
            
            // Sort reviews by date (newest first)
            const sortedReviews = [...reviews].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            sortedReviews.forEach(review => {
                const reviewElement = document.createElement('div');
                reviewElement.className = 'review-item';
                
                // Format date
                const date = new Date(review.date);
                const formattedDate = date.toLocaleDateString('id-ID', {
                    day: 'numeric',
                    month: 'long',
                    year: 'numeric'
                });
                
                // Render stars for this review
                let starsHtml = '';
                for (let i = 1; i <= 5; i++) {
                    starsHtml += `<span class="star ${i <= review.rating ? 'filled' : ''}">★</span>`;
                }
                
                reviewElement.innerHTML = `
                    <div class="review-header">
                        <div class="reviewer-info">
                            <div class="reviewer-name">${review.name}</div>
                            <div class="review-date">${formattedDate}</div>
                        </div>
                        <div class="review-rating">
                            ${starsHtml}
                        </div>
                    </div>
                    <p class="review-comment">${review.comment}</p>
                `;
                
                container.appendChild(reviewElement);
            });
        }

        // Update rating display on card
        function updateCardRating(placeId) {
            const card = document.querySelector(`.feature-card[data-place="${placeId}"]`);
            if (!card) return;
            
            const averageRating = calculateAverageRating(placeId);
            const totalReviews = getTotalReviews(placeId);
            
            const ratingContainer = card.querySelector('.place-rating');
            if (ratingContainer) {
                const starsContainer = ratingContainer.querySelector('.stars');
                const ratingValue = ratingContainer.querySelector('.rating-value');
                const reviewCount = ratingContainer.querySelector('.review-count');
                
                if (starsContainer) {
                    starsContainer.innerHTML = '';
                    const fullStars = Math.floor(averageRating);
                    
                    for (let i = 1; i <= 5; i++) {
                        const star = document.createElement('span');
                        star.className = 'star';
                        if (i <= fullStars) {
                            star.classList.add('filled');
                        }
                        star.textContent = '★';
                        starsContainer.appendChild(star);
                    }
                }
                
                if (ratingValue) ratingValue.textContent = averageRating;
                if (reviewCount) reviewCount.textContent = `(${totalReviews} ulasan)`;
            }
        }

        // Star input handlers
        let selectedRating = 0;

        function handleStarHover(e) {
            const rating = parseInt(e.target.dataset.rating);
            highlightStars(rating);
            updateRatingText(rating);
        }

        function handleStarClick(e) {
            selectedRating = parseInt(e.target.dataset.rating);
            highlightStars(selectedRating);
            updateRatingText(selectedRating);
            document.getElementById('selectedRating').value = selectedRating;
        }

        function highlightStars(rating) {
            const stars = document.querySelectorAll('#ratingStarsInput .star-input');
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        function updateRatingText(rating) {
            const texts = [
                "Pilih rating dengan mengklik bintang",
                "Kurang memuaskan",
                "Cukup memuaskan",
                "Baik",
                "Sangat baik",
                "Luar biasa!"
            ];
            document.getElementById('ratingText').textContent = texts[rating];
        }

        // Reset star input
        function resetStarInput() {
            selectedRating = 0;
            highlightStars(0);
            updateRatingText(0);
            document.getElementById('selectedRating').value = 0;
            document.getElementById('reviewerName').value = '';
            document.getElementById('reviewComment').value = '';
        }

        // Elemen modal
        const modal = document.getElementById('placeModal');
        const closeModalBtn = document.getElementById('closeModal');
        const closeModalBtn2 = document.getElementById('closeModalBtn');
        const viewOnMapBtn = document.getElementById('viewOnMap');
        const openReviewFormBtn = document.getElementById('openReviewForm');
        const reviewForm = document.getElementById('reviewForm');
        const cancelReviewFormBtn = document.getElementById('cancelReviewForm');
        const newReviewForm = document.getElementById('newReviewForm');
        
        // Elemen konten modal
        const modalPlaceName = document.getElementById('modalPlaceName');
        const modalPlaceImage = document.getElementById('modalPlaceImage');
        const modalPlaceDescription = document.getElementById('modalPlaceDescription');
        const modalPlaceAddress = document.getElementById('modalPlaceAddress');
        const averageRatingElement = document.getElementById('averageRating');
        const averageStarsElement = document.getElementById('averageStars');
        const totalReviewsElement = document.getElementById('totalReviews');
        
        // Variabel untuk menyimpan data tempat yang sedang dilihat
        let currentPlaceId = null;
        let currentPlaceData = null;

        // Fungsi untuk membuka modal
        function openModal(placeId) {
            const placeData = placesData[placeId];
            if (!placeData) return;
            
            currentPlaceId = placeId;
            currentPlaceData = placeData;
            
            // Isi konten modal
            modalPlaceName.textContent = placeData.name;
            modalPlaceImage.src = placeData.image;
            modalPlaceImage.alt = placeData.name;
            modalPlaceDescription.textContent = placeData.description;
            modalPlaceAddress.textContent = placeData.address;
            
            // Update rating information
            const averageRating = calculateAverageRating(placeId);
            const totalReviews = getTotalReviews(placeId);
            
            averageRatingElement.textContent = averageRating;
            totalReviewsElement.textContent = `${totalReviews} ulasan`;
            
            // Render stars
            renderStars(averageRating, 'averageStars');
            
            // Render rating distribution
            renderRatingDistribution(placeId);
            
            // Render reviews list
            renderReviewsList(placeId);
            
            // Hide review form
            reviewForm.style.display = 'none';
            
            // Reset star input
            resetStarInput();
            
            // Tampilkan modal
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        // Fungsi untuk menutup modal
        function closeModal() {
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
            currentPlaceId = null;
            currentPlaceData = null;
        }

        // Event listener untuk kartu tempat bersejarah
        document.querySelectorAll('.feature-card').forEach(card => {
            card.addEventListener('click', function(e) {
                // Cegah klik pada link alamat agar tidak membuka modal
                if (e.target.tagName === 'A' || e.target.closest('a')) {
                    return;
                }
                
                const placeId = this.getAttribute('data-place');
                openModal(placeId);
            });
        });

        // Event listener untuk tombol tutup modal
        closeModalBtn.addEventListener('click', closeModal);
        closeModalBtn2.addEventListener('click', closeModal);
        
        // Event listener untuk tombol lihat di peta
        viewOnMapBtn.addEventListener('click', function() {
            if (currentPlaceData && currentPlaceData.mapLink) {
                window.location.href = currentPlaceData.mapLink;
            }
        });

        // Event listener untuk tombol tambah ulasan
        openReviewFormBtn.addEventListener('click', function() {
            reviewForm.style.display = 'block';
            this.style.display = 'none';
        });

        // Event listener untuk tombol batal form ulasan
        cancelReviewFormBtn.addEventListener('click', function() {
            reviewForm.style.display = 'none';
            openReviewFormBtn.style.display = 'flex';
            resetStarInput();
        });

        // Event listener untuk form ulasan baru
        newReviewForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('reviewerName').value.trim();
            const rating = parseInt(document.getElementById('selectedRating').value);
            const comment = document.getElementById('reviewComment').value.trim();
            
            if (!name || !rating || rating < 1 || rating > 5 || !comment) {
                alert('Harap isi semua field dengan benar!');
                return;
            }
            
            // Add new review
            const newReview = {
                id: Date.now(),
                name: name,
                rating: rating,
                comment: comment,
                date: new Date().toISOString().split('T')[0]
            };
            
            if (!reviewsData[currentPlaceId]) {
                reviewsData[currentPlaceId] = [];
            }
            
            reviewsData[currentPlaceId].push(newReview);
            saveReviewsToStorage();
            
            // Update UI
            const averageRating = calculateAverageRating(currentPlaceId);
            const totalReviews = getTotalReviews(currentPlaceId);
            
            averageRatingElement.textContent = averageRating;
            totalReviewsElement.textContent = `${totalReviews} ulasan`;
            renderStars(averageRating, 'averageStars');
            renderRatingDistribution(currentPlaceId);
            renderReviewsList(currentPlaceId);
            updateCardRating(currentPlaceId);
            
            // Reset form
            resetStarInput();
            reviewForm.style.display = 'none';
            openReviewFormBtn.style.display = 'flex';
            
            alert('Ulasan Anda telah berhasil dikirim! Terima kasih.');
        });

        // Tutup modal saat klik di luar konten modal
        modal.addEventListener('click', function(e) {
            if (e.target === modal) {
                closeModal();
            }
        });

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize reviews storage
            initializeReviewsStorage();
            
            // Dynamic year in footer
            document.getElementById('current-year').textContent = new Date().getFullYear();
            
            // Highlight current page in navigation
            const currentPage = window.location.pathname;
            const navLinks = document.querySelectorAll('.nav a');
            
            navLinks.forEach(link => {
                const linkPath = link.getAttribute('href');
                const cleanLinkPath = linkPath.replace('../', '').replace('./', '');
                const cleanCurrentPath = currentPage.replace('/geoportal-purwokerto-selatan--teluk/', '');
                
                if (cleanCurrentPath.includes(cleanLinkPath) || 
                    (cleanCurrentPath === '' && linkPath === './')) {
                    link.classList.add('active');
                }
            });
            
            // Smooth scrolling for anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    if (targetId === '#') return;
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        window.scrollTo({
                            top: targetElement.offsetTop - 80,
                            behavior: 'smooth'
                        });
                    }
                });
            });
            
            // Animation for feature cards on scroll
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, observerOptions);

            // Observe feature cards
            document.querySelectorAll('.feature-card').forEach(card => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                observer.observe(card);
            });

            // Observe map options
            document.querySelectorAll('.map-option').forEach(option => {
                option.style.opacity = '0';
                option.style.transform = 'translateY(20px)';
                option.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                observer.observe(option);
            });
        });
    </script>
</body>
</html>
